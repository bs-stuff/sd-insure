<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Find an Agent â€” sd.insure</title>
  <meta name="description" content="Search our directory of independent insurance agents across South Dakota.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="../css/global.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/pages.css">
  <link rel="stylesheet" href="../css/membermap.css">
</head>
<body>

  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-inner">
      <a href="../index.html" class="nav-logo">sd<span>.insure</span></a>
      <button class="nav-toggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div class="nav-links">
        <a href="../index.html">Home</a>
        <a href="find-agent.html">Find an Agent</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Agent Finder -->
  <section class="finder-section">
    <div class="container">

      <!-- Search Panel -->
      <div class="search-panel">
        <div class="search-row">
          <div class="search-group">
            <label for="insurance-type">What type of insurance?</label>
            <select id="insurance-type">
              <option value="">All Types</option>
              <option value="personal">Home, Auto</option>
              <option value="commercial">Commercial</option>
              <option value="farm">Farm</option>
              <option value="life">Life</option>
              <option value="health">Health</option>
              <option value="crop">Crop / LRP</option>
              <option value="bonds">Bonds</option>
            </select>
          </div>
          <div class="search-group">
            <label for="zip-input">Your zip code</label>
            <input type="text" id="zip-input" maxlength="5" inputmode="numeric" pattern="[0-9]*" autocomplete="postal-code" placeholder="e.g. 57101">
          </div>
          <button class="btn-map btn-map-primary" id="search-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
            Find Agents
          </button>
          <button class="btn-map btn-map-secondary" id="reset-btn">Reset</button>
        </div>
      </div>

      <!-- Mobile View Toggle -->
      <div class="mobile-view-toggle" id="mobile-view-toggle">
        <button class="mobile-view-btn active" data-view="map">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
          Map
        </button>
        <button class="mobile-view-btn" data-view="list">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
          List
        </button>
      </div>

      <!-- Map + Sidebar -->
      <div class="map-results map-view" id="map-results">
        <div id="map"></div>
        <aside class="sidebar">
          <div class="sidebar-header">
            <h2>Agencies</h2>
            <span class="count" id="results-count">0</span>
            <button class="mobile-toggle" id="toggle-list"><span>Show List</span></button>
          </div>
          <div class="results-list" id="results-list">
            <div class="loading">Loading agencies</div>
          </div>
        </aside>
      </div>

    </div>
  </section>

  <!-- CTA Banner -->
  <section class="cta-banner">
    <h2>Can't Find What You're Looking For?</h2>
    <p>Reach out directly and we'll help connect you with an agent in your area.</p>
    <div class="btn-group">
      <a href="contact.html" class="btn btn-primary">Contact Us</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-brand">
        <h4>sd.insure</h4>
        <p>The Independent Insurance Agents of South Dakota. Helping South Dakotans find the right coverage from local agents who put you first.</p>
      </div>
      <div class="footer-links">
        <h4>Insurance</h4>
        <a href="insurance/home.html">Home</a>
        <a href="insurance/auto.html">Auto</a>
        <a href="insurance/business.html">Business</a>
        <a href="insurance/farm.html">Farm &amp; Ranch</a>
        <a href="insurance/crop.html">Crop</a>
        <a href="insurance/health.html">Health</a>
        <a href="insurance/life.html">Life</a>
      </div>
      <div class="footer-links">
        <h4>Resources</h4>
        <a href="find-agent.html">Find an Agent</a>
        <a href="about.html">About IIASD</a>
        <a href="contact.html">Contact Us</a>
      </div>
    </div>
    <div class="footer-bottom">
      &copy; 2026 Independent Insurance Agents of South Dakota. All rights reserved.
    </div>
  </footer>

  <script src="../js/main.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="../js/membermap.js"></script>
</body>
</html>
